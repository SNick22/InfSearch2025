<!DOCTYPE html>
<html lang="ru">

  <head>
    <title>Новый компилятор K2 в Kotlin. Часть 1 &#x2F; Хабр</title>
<meta property="fb:app_id" content="444736788986613">
<meta property="fb:pages" content="472597926099084">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@habr_com">
<meta property="og:site_name" content="Хабр">
<link href="https://habr.com/ru/rss/post/823164/?fl=ru" type="application/rss+xml" title rel="alternate" name="rss">
<link href="https://habr.com/ru/companies/spring_aio/articles/823164/" rel="canonical" data-hid="e3fa780">
<link rel="image_src" href="https://habrastorage.org/getpro/habr/upload_files/012/2f3/8de/0122f38dec22f39b26c521df2e76228d.jpeg" data-hid="2a79c45">
<link rel="amphtml" href="https://habr.com/ru/amp/publications/823164/">
<meta property="og:title" content="Новый компилятор K2 в Kotlin. Часть 1">
<meta name="twitter:title" content="Новый компилятор K2 в Kotlin. Часть 1">
<meta name="aiturec:title" content="Новый компилятор K2 в Kotlin. Часть 1">
<meta name="description" content="1. Введение В этой статье эксперт сообщества Spring АйО – Михаил Поливаха рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2 призван решить, а затем о других...">
<meta itemprop="description" content="1. Введение В этой статье эксперт сообщества Spring АйО – Михаил Поливаха рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2 призван решить, а затем о других...">
<meta property="og:description" content="1. Введение В этой статье эксперт сообщества Spring АйО – Михаил Поливаха рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2 призван решить, а затем о других...">
<meta name="twitter:description" content="1. Введение В этой статье эксперт сообщества Spring АйО – Михаил Поливаха рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2 призван решить, а затем о других...">
<meta property="aiturec:description" content="1. Введение В этой статье эксперт сообщества Spring АйО – Михаил Поливаха рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2 призван решить, а затем о других...">
<meta itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/012/2f3/8de/0122f38dec22f39b26c521df2e76228d.jpeg">
<meta property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/012/2f3/8de/0122f38dec22f39b26c521df2e76228d.jpeg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/012/2f3/8de/0122f38dec22f39b26c521df2e76228d.jpeg">
<meta name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/012/2f3/8de/0122f38dec22f39b26c521df2e76228d.jpeg">
<meta property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/012/2f3/8de/0122f38dec22f39b26c521df2e76228d.jpeg?format=vk">
<meta property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/012/2f3/8de/0122f38dec22f39b26c521df2e76228d.jpeg?format=vk">
<meta property="aiturec:item_id" content="823164">
<meta property="aiturec:datetime" content="2024-06-21T08:18:06.000Z">
<meta content="https://habr.com/ru/companies/spring_aio/articles/823164/" property="og:url">
<meta property="og:type" content="article">
<meta property="og:locale" content="ru_RU">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="keywords" content="kotlin, k2, compiler">
<script type="application/ld+json" data-hid="1e0f0a2">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/companies\/spring_aio\/articles\/823164\/"},"headline":"Новый компилятор K2 в Kotlin. Часть 1","datePublished":"2024-06-21T11:18:06+03:00","dateModified":"2024-08-30T09:38:58+03:00","author":{"@type":"Person","name":"Spring АйО"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"1. ВведениеВ этой статье эксперт сообщества Spring АйО &ndash; Михаил Поливаха рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2...","url":"https:\/\/habr.com\/ru\/companies\/spring_aio\/articles\/823164\/#post-content-body","about":["c_spring_aio","h_programming","h_kotlin","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/823164\/8a835d1d3df5d614366431ef1d424518\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/a1d\/756\/406\/a1d7564060c22ca43c4572f8d920a9af.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/012\/2f3\/8de\/0122f38dec22f39b26c521df2e76228d.jpeg"]}</script>
    <meta charset="UTF-8">
    <meta name="viewport"
      content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
    <meta name="referrer" content="unsafe-url">
    <style>
      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5VvmojLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvk4jLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5VvmYjLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvl4jLazX3dA.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveSxf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveQhf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveSBf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveRhf6Xl7Glw.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eSxf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eQhf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eSBf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eRhf6Xl7Glw.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }
    </style>
    <link rel="preload" href="https://assets.habr.com/habr-web/css/theme/light-v1.css" as="style" media="(prefers-color-scheme: light)" /><link rel="preload" href="https://assets.habr.com/habr-web/css/theme/dark-v1.css" as="style" media="(prefers-color-scheme: dark)" /><link id="light-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/light-v1.css" media="(prefers-color-scheme: light)" /><link id="dark-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/dark-v1.css" media="(prefers-color-scheme: dark)" />
    <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.35b2fec11bb79a62419ab67779c2dd82.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
    <style>
      .grecaptcha-badge {
        visibility: hidden;
      }
    </style>
    <meta name="habr-version" content="2.233.0">
    
    <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
    <meta name="msapplication-TileColor" content="#629FBC">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" type="image/png" sizes="16x16" href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png">
    <link rel="shortcut icon" type="image/png" sizes="32x32" href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png">
    <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png">
    <link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png">
    <link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png">
    <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png">
    <link rel="apple-touch-icon" type="image/png" sizes="256x256" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png">
    <link rel="mask-icon" color="#77a2b6" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg">
    <link crossorigin="use-credentials" href="/manifest.webmanifest" rel="manifest">
    <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
    <script>window.yaContextCb = window.yaContextCb || []</script>
    <script src="https://yandex.ru/ads/system/context.js" async></script>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.04465f7c.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.3b11d41f.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.20959a76.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.7a97ea6d.js" as="script"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.04465f7c.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.20959a76.css"></head>
  <body>
    
    <div id="mount"><div id="app" data-async-called="true"><div class="tm-layout__wrapper"><!--[--><!----><div></div><div class="tm-feature tm-feature"><!----></div><header class="tm-header" data-test-id="header"><div class="tm-page-width"><!--[--><div class="tm-header__container"><div class="tm-header__burger-nav" data-test-id="burger-nav"><button class="tm-header__button tm-header__button_burger" type="button"><svg class="tm-svg-img tm-header__icon tm-header__icon-burger" height="16" width="16"><title>Меню</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#header-burger"></use></svg></button></div><span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo_hl-ru tm-header__logo" href="/ru/"><svg class="tm-svg-img tm-header__icon" height="16" width="16"><title>Хабр</title><use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a><span style="display:none;" class="tm-header__beta-sign">β</span></span><!----><div class="tm-header-user-menu tm-header_user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search" data-test-id="search-button"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search" height="24" width="24"><title>Поиск</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#search"></use></svg></a><!----><!----><div class="tm-header-user-menu__item tm-header-user-menu__write"><div><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_write" height="24" width="24"><title>Написать публикацию</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#write"></use></svg></div><!----></div><!--[--><div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle" data-test-id="user-menu-settings"><svg class="tm-svg-img tm-header-user-menu__icon" height="24" width="24"><title>Настройки</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#page-settings"></use></svg></button></div><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/companies/spring_aio/articles/823164/&amp;hl=ru" rel="nofollow" class="tm-header-user-menu__item"><!--[--><button class="btn btn_solid btn_small tm-header-user-menu__login" type="button"><!--[-->Войти<!--]--></button><!--]--></a><!--]--><!----><!--teleport start--><!--teleport end--><!----></div></div><!--]--></div></header><div class="tm-layout"><div class="tm-page-progress-bar"></div><!----><!----><div class="tm-page-width"><!--[--><!--]--></div><main class="tm-layout__container"><div class="tm-page" hl="ru" companyname="spring_aio" data-async-called="true" style="--0c809c5a:16px;--a086013e:100%;--7c457026:0;"><div class="tm-page-width"><!--[--><div class="tm-page__header"><!--[--><!--]--></div><div class="tm-page__wrapper"><div class="tm-page__main_has-sidebar tm-page__main"><div class="pull-down"><!----><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg class="tm-svg-img pull-down__icon pull-down__arrow" height="24" width="24"><title>Обновить</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#pull-arrow"></use></svg></div></div><!--[--><!--[--><div class="tm-article-presenter"><!--[--><!--]--><div class="tm-article-presenter__body" data-test-id="article-body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><!--[--><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><!--[--><div class="tm-article-presenter__header"><!--[--><!--]--><div class="tm-article-snippet tm-article-snippet tm-article-presenter__snippet"><!--[--><!--]--><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/spring_aio/" class="tm-user-info__userpic" data-test-id="user-info-pic" title="spring_aio"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="32" src="//habrastorage.org/r/w64/getpro/habr/avatars/8e0/5e8/a1c/8e05e8a1c5fd4560f661efb2cb00e77e.png" width="32"></div></a><span class="tm-user-info__user tm-user-info__user_appearance-default" data-test-id="user-info-description"><a href="/ru/users/spring_aio/" class="tm-user-info__username">spring_aio <!----></a><!--[--><span class="tm-article-datetime-published"><time datetime="2024-06-21T08:18:06.000Z" title="2024-06-21, 11:18">21  июн  2024 в 11:18</time></span><!--]--></span></span></div><!----></div><h1 class="tm-title tm-title_h1" lang="ru" data-test-id="articleTitle"><span>Новый компилятор K2 в Kotlin. Часть 1</span></h1><div class="tm-article-snippet__stats" data-test-id="articleStats"><div class="tm-article-complexity tm-article-complexity_complexity-medium"><span class="tm-svg-icon__wrapper tm-article-complexity__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Уровень сложности</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#complexity-medium"></use></svg></span><span class="tm-article-complexity__label">Средний</span></div><div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Время на прочтение</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#clock"></use></svg></span><span class="tm-article-reading-time__label">7 мин</span></div><span class="tm-icon-counter tm-data-icons__item"><svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24"><title>Количество просмотров</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-views"></use></svg><span class="tm-icon-counter__value" title="6483">6.5K</span></span></div><div class="tm-publication-hubs__container" data-test-id="articleHubsList"><div class="tm-publication-hubs"><!--[--><span class="tm-publication-hub__link-container"><a href="/ru/companies/spring_aio/articles/" class="tm-publication-hub__link"><!--[--><span>Блог компании Spring АйО</span><!----><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/programming/" class="tm-publication-hub__link"><!--[--><span>Программирование</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/kotlin/" class="tm-publication-hub__link"><!--[--><span>Kotlin</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><!--]--></div></div><div class="tm-article-labels" data-test-id="articleLabels"><div class="tm-article-labels__container"><div class="tm-publication-label tm-publication-label_variant-review"><span>Обзор</span></div><!--[--><div class="tm-publication-label tm-publication-label_variant-translation"><span>Перевод</span></div><!--]--></div></div><!----><!----></div></div><!--[--><div class="tm-article-presenter__origin"><a class="tm-article-presenter__origin-link" href="https://www.baeldung.com/kotlin/k2-compiler-guide" target="_blank">Автор оригинала: <span>Mikhail Polivakha</span></a></div><div class="tm-article-body" data-gallery-root lang="ru"><div><!--[--><!--]--></div><div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><h2>1. Введение</h2><p>В этой статье эксперт сообщества <a href="https://t.me/+QmrKn0wA8CdkNjAy">Spring АйО</a> –<a href="https://www.baeldung.com/author/polivakhamikhail"> <u>Михаил Поливаха</u></a> рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2 призван решить, а затем о других минорных улучшениях, которые были сделаны. Гайд по обновлению на новую версию будет опубликован в следующей части этой статьи.</p><h2>2. Причины создания новой версии компилятора</h2><p>Для понимания мотивации за новым K2 компилятором, необходимо начать с истории вопроса. А именно, важно понять, какую цель Kotlin преследовал изначально.</p><h3>2.1 Создание Kotlin</h3><p>Kotlin существует уже достаточно продолжительное время. Разработка началась в 2010, так что мы можем с уверенностью сказать, что это было достаточно давно. Причина появления Kotlin заключается в том, что в те времена принято было считать, что Java развивается довольно медленно, стагнирует. Скорость разработки языка была довольно медленной, а новые фичи были редким явлением, в сравнении, к примеру с C#, в котором эволюция языка шла значительно быстрее.</p><p>И Kotlin создавался как язык, который, как предполагалось, заполнит этот пробел. Первоначально язык предлагался только как улучшенная версия Java, он не был предназначен для того, чтобы превзойти или каким-то образом заменить Java, так как Kotlin работает поверх JVM, он только предлагал дополнительные возможности языка. И этих возможностей было достаточно много, к примеру</p><ul><li><p><a href="https://www.baeldung.com/kotlin/null-safety"><u>null handling</u></a></p></li><li><p><a href="https://www.baeldung.com/kotlin/elvis-operator"><u>Elvis operator</u></a></p></li><li><p><a href="https://www.baeldung.com/kotlin/reified-functions"><u>generics refinement</u></a></p></li><li><p><a href="https://www.baeldung.com/kotlin/generics"><u>type variance</u></a></p></li><li><p><a href="https://www.baeldung.com/kotlin/extension-methods"><u>extension functions</u></a></p></li></ul><p>и многие, многие другие. И все эти фичи невероятно востребованы у обычных разработчиков.</p><h3>2.2 Проблемы Kotlin</h3><p><strong>Однако мы должны понимать, что чем больше фич есть в языке программирования, тем сложнее он будет, и, следовательно, компилятор должен будет совершить больше действий для компиляции проекта. </strong>На данный момент в Kotlin насчитывается более 30 глобальных (жестких) ключевых слов и около 20 контекстных (мягких) ключевых слов, не считая десятка других модификаторов. К примеру, в языке Go всего 25 ключевых слов. Причина этого кроется в том, что Go был спроектирован таким образом, чтобы быть настолько простым, насколько это только возможно, именно с точки зрения функционала. Поэтому программы на Go компилируются невероятно быстро, в сравнении с программами на других языках программирования.</p><p>Ну а как обстоят дела с Kotlin? <strong>Из-за множества фич, которыми обладает Kotlin, а также из-за сложности системы типов Kotlin, время компиляции всегда было его слабым местом</strong>. Например, в общем случае <a href="https://youtrack.jetbrains.com/issue/KTIJ-7707/Compile-time-for-Kotlin-Projects-extremely-slow-on-OSX"><u>Kotlin компилируется намного медленнее Java</u></a>.</p><p><strong>Эти цифры, конечно, довольно спорные и сильно зависят от конфигурации процесса сборки, от сложности написанного нами кода и т.д</strong>. Разница в скорости компиляции была особенно заметна на более ранних версиях Kotlin. Опытные разработчики, вероятно, помнят, насколько медленным было автодополнение кода в свое время в IntelliJ IDEA. Конечно же со временем ситуация улучшилась, но проблема все еще существует.</p><h2>3. Компилятор K2. Улучшения</h2><p>Начиная с версии языка Kotlin 2.0.0 компилятор К2 используется по умолчанию. Это означает, что Maven и Gradle Kotlin плагины теперь будут компилировать код используя компилятор К2. Давайте более детально обсудим улучшения связанные с процессом компиляции. Начнем с главного - с улучшения производительности.</p><h3>3.1. Скорость компиляции</h3><p>Разработчики языка конечно же знали о проблеме со скоростью компиляции и в версии Kotlin 1.7.0 была выпущена альфа-версия компилятора К2. <strong>Его основной целью было улучшение скорости компиляции программ и снижение сложности компилятора в целом</strong>.<a href="https://kotlinlang.org/docs/whatsnew17.html#new-kotlin-k2-compiler-for-the-jvm-in-alpha"> <u>По наблюдениям JetBrains, улучшение скорости компиляции может достигать 200% и даже больше</u></a>. Важно понимать, что эти тесты относятся только к конкретным проектам JetBrains и могут отличаться от наших.</p><h3>3.2. Smart Casts</h3><p>Поскольку в K2 компиляторе была переписана Front-End часть, функциональность умного приведения типов улучшилась. Позже мы обсудим, что конкретно изменилось в компиляторе K2, а пока сосредоточимся на изменениях, заметных пользователю. Рассмотрим пример</p><pre><code class="kotlin">fun translateExecution(exception: Throwable?) : Throwable? {
    val isInvocationTargetException = exception is InvocationTargetException
    if (isInvocationTargetException) {
        return (exception as InvocationTargetException).targetException
    }
    return exception
}</code></pre><p>Это довольно простой код, не будем пояснять его детально. Он компилируется и новым и старым компилятором. <strong>Проблема заключается в том, что нам необходимо сделать явное приведение типов внутри выражения <em>if</em></strong>. На самом деле, это избыточно, так как на этом этапе мы уже должны знать, что переменная <em>exception</em> имеет тип <em>InvocationTargetException</em>. Однако Kotlin компилятор K1 (в данном конкретном случае), не сможет вывести тип локальной переменной exception. Связано это с тем, что K1 не может связать значение <code>isInvocationTargetException</code> и типа локальной переменной <code>exception</code>. Иными словами, если <code>isInvocationTargetException == true</code>, то тип локальной переменной <code>exception</code> точно <code>InvocationTargetException</code>, но К1 не может понять эту взаимосвязь. Но в случае компилятора К2 это явное приведение типов внутри выражения <em>if</em> будет излишним и код будет выглядеть следующим образом:</p><pre><code class="kotlin">fun translateExecutionV2(exception: Throwable?) : Throwable? {
    val isInvocationTargetException = exception is InvocationTargetException
    if (isInvocationTargetException) {
        return exception.targetException
    }
    return exception
}</code></pre><p>Этот код успешно скомпилируется компилятором К2. Но нужно заметить, что следующий код все равно не будет работать:</p><pre><code class="kotlin">fun translateExecutionV2(exception: Throwable?) : Throwable? {
    if (isInvocationTargetException(exception)) {
        return exception.targetException
    }
    return exception
}

private fun isInvocationTargetException(exception: Throwable?) = 
  exception is InvocationTargetException</code></pre><p>Компилятор K2 не отслеживает проверки внутри функций. Чтобы решить эту проблему, у нас есть <a href="https://www.baeldung.com/kotlin/contracts"><u>Contracts API</u></a>.</p><p>В области умного приведения типов сделано много других улучшений, но все они сводятся к одной простой вещи: <strong>теперь компилятор K2 способен лучше выводить типы, а явные приведения типов стали встречаться реже</strong>.</p><h2>4. Компилятор К2. Основные изменения</h2><p>Давайте теперь обсудим, какие изменения привели к заявленному росту производительности. Чтобы понять это, нужно сначала выяснить, какая именно часть компилятора была изменена - в основном это Front-End часть компилятора Kotlin.</p><p>Фронтенд компилятор отвечает за построение PSI (Program Structure Interface) - конкретного синтаксического дерева (Concrete Syntax Tree, CST) - начальную структуру данных, которую собирает Front-End компилятор Kotlin. Позже Front-End компилятор Kotlin строит семантическое дерево FIR (Front-End Intermediate Representation), которое является абстрактным синтаксическим деревом (Abstract Syntax Tree, AST).</p><h3>4.1 PSI vs FIR</h3><p>Первая проблема со старым компилятором заключалась в том, что он слишком полагался на структуру PSI, которая по своей конструкции намного больше и сложнее, чем структура данных FIR. Это связано с тем, что PSI содержит всю информацию, имеющуюся в исходном коде, в то время как FIR представляет собой более разреженную версию. Поэтому работа с FIR в целом быстрее.</p><p>Еще одной проблемой старого компилятора был <em>BindingContext</em>. Это огромная коллекция хэш-таблиц, в которой хранится семантическая информация о программе. Так, к примеру, если мы хотим найти переменную, на которую ссылаются в<a href="https://www.baeldung.com/kotlin/string-interpolation"> <u>интерполяции строк</u></a>, старому компилятору нужно выполнить 2 поиска в хеш таблицах внутри BindingContext. Новый компилятор K2 этого не делает, а вместо этого полагается на древовидную структуру данных в FIR. Доступ к значению узла дерева выполняется быстрее, чем 2 поиска внутри огромной хэш-таблицы.</p><h3>4.2 Уменьшение количества jump между классами</h3><p>И наконец, компилятор К2 значительно сократил количество jump, необходимых для определения, например, возвращаемого значения функции. Чтобы понять, что означает "jump", давайте рассмотрим следующий пример:</p><pre><code class="kotlin">// in ChildClass.kt
class ChildClass : ParentClass() {
    fun greeting(s: String) = hello(s)
}

// in ParentClass.kt
open class ParentClass {
    internal fun hello(s: String) = println("Hello, $s!")
}</code></pre><p>Итак, здесь тип возвращаемого значения функции greeting() соответствует типу возвращаемого значения функции hello(). Поэтому нам нужно сначала определить тип возвращаемого значения функции hello() для того, чтобы определить тип возвращаемого значения функции greetings(). Однако на самом деле мы не знаем, какую функцию hello() имел в виду пользователь, поэтому нам нужно сначала ее найти. Это может быть локальная функция (в том же классе, например), это может быть функция родительского класса, который скорее всего находится в другом файле .kt, поэтому нам нужно выполнить jump в родительский файл .kt. Искомой функции может не оказаться в родительском файле. Кроме того, это может быть функция, включенная через импорт со звездочкой, поэтому нам нужно искать функцию верхнего уровня hello() в этих файлах и т.д. Все это и будет jump в другие исходные файлы.</p><p><strong>Jump относительно дорогие в процессе разрешения ссылок</strong>. Старый компилятор Kotlin выполнял множество jump практически на каждом этапе процесса компиляции. В отличие от этого, новый компилятор Kotlin K2 имеет всего 2 этапа, на которых присутствуют jump - вывод родительских типов (как в приведенном выше примере) и неявные объявления типов.</p><h2>5. Модуль Multiplatform</h2><p>Также были внесены два изменения в модуль Kotlin Multiplatform.</p><h3>5.1 Разделение модулей</h3><p>В прошлом компилятор Kotlin требовал наличие как common, так и платформенного кода на этапе компиляции. В некоторых сценариях это могло привести к ситуациям, когда код на Kotlin common вызывал платформенный код. Теперь возможно компилировать платформенный код отдельно от common модуля. Такой подход менее подвержен ошибкам и предсказуем в поведении кода на различных платформах.</p><h3>5.2 Расширение видимости</h3><p>Теперь мы также можем изменить модификатор видимости для <em>эле</em>мента <code>actual</code> так, чтобы он отличался от <code>expect</code>. <strong>Важно отметить, что мы можем либо расширить уровень видимости actual декларации, по сравнению с expected, либо оставить таким же, но не сузить.</strong>  Ранее компилятор требовал, чтобы модификатор видимости был одинаковым как для <code>expect</code>  элемента, так и для <em> </em><code>actual</code>. Рассмотрим пример:</p><pre><code class="kotlin">// Common module
expect fun getPlatform(): Platform

// Android Platform
actual fun getPlatform(): Platform = AndroidPlatform()</code></pre><p>В приведенном выше примере обе функции неявно имеют модификатор <em>public</em>. Теперь можно сделать это:</p><pre><code class="kotlin">// Common module
internal expect fun getPlatform(): Platform

// Android Platform
actual fun getPlatform(): Platform = AndroidPlatform()</code></pre><p>Здесь <code>expect</code> функция имеет модификатор видимости internal. В то же время <code>actual</code> реализация для платформы Android, например, имеет неявный модификатор public.</p><h3>6. Выводы</h3><p>Kotlin уже существует достаточно долгое время. За это время в нем накопилось множество возможностей. Поскольку Kotlin в итоге компилируется в байт-код Java (не учитывая KMM и Kotlin Native), все его возможности реализованы компилятором. По этой причине процесс компиляции был довольно сложным. Это привело к медленной компиляции проектов на Kotlin. Компилятор K2 решает именно эту проблему. Он стремится упростить процесс компиляции, сделав его значительно быстрее. В то же время он улучшает умное приведение типов и позволяет разделять общий и платформенный код в KMM.</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/a1d/756/406/a1d7564060c22ca43c4572f8d920a9af.png" width="1920" height="412" data-src="https://habrastorage.org/getpro/habr/upload_files/a1d/756/406/a1d7564060c22ca43c4572f8d920a9af.png"/></figure><p>Присоединяйтесь к русскоязычному сообществу разработчиков на Spring Boot в телеграм - <a href="https://t.me/+oBwACbkvJ19iODAy"><u>Spring АйО</u></a>, чтобы быть в курсе последних новостей из мира разработки на Spring Boot и всего, что с ним связано.</p><p>Ждем всех, <a href="https://t.me/+oBwACbkvJ19iODAy"><u>присоединяйтесь</u></a>!</p><p></p></div></div></div><!----><!----></div><!----><!----></div><!--]--><!----><div class="tm-article-presenter__meta" data-test-id="article-meta-links"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[kotlin]" class="tm-tags-list__link"><span>kotlin</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[k2]" class="tm-tags-list__link"><span>k2</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[compiler]" class="tm-tags-list__link"><span>compiler</span></a><!--]--></li><!--]--><!----></ul></div><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a href="/ru/companies/spring_aio/articles/" class="tm-hubs-list__link"><!--[--><span>Блог компании Spring АйО</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/programming/" class="tm-hubs-list__link"><!--[--><span>Программирование</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/kotlin/" class="tm-hubs-list__link"><!--[--><span>Kotlin</span><!--]--></a><!--]--></li><!--]--><!----></ul></div></div><!----><!--]--></article><!--]--></div><!----></div><div style="" class="tm-article-sticky-panel" data-test-id="article-sticky-panel"><div class="tm-data-icons tm-data-icons tm-data-icons_space-big tm-article-sticky-panel__icons" data-test-id="article-stats-icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article" height="24" width="24"><title>Всего голосов 17: ↑17 и ↓0</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-rating"></use></svg><span class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating tm-votes-meter__value" data-test-id="votes-meter-value" title="Всего голосов 17: ↑17 и ↓0">+20</span></div><!--teleport start--><!--teleport end--><!----></div><!----><!----><button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Добавить в закладки</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-favorite"></use></svg></span><span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">29</span></button><div class="tm-sharing tm-data-icons__item" title="Поделиться"><button class="tm-sharing__button" type="button"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button><!--teleport start--><!--teleport end--></div><div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="/ru/companies/spring_aio/articles/823164/comments/" class="tm-article-comments-counter-link__link" data-test-id="counter-comments"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value">0</span><!--]--></a><!----></div><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--teleport start--><!--teleport end--><!----></div></div></div><!--[--><!--]--><div class="tm-article-presenter__footer"><!--[--><!--[--><div class="tm-article-blocks"><!----><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><!----><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><!--[--><div class="tm-article-author" data-test-id="article-author-info" data-async-called="true"><!--[--><!--[--><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/companies/spring_aio/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="40" src="//habrastorage.org/getpro/habr/company/8f1/91a/458/8f191a4584b8fab12d15af23e447a1d5.png" width="40"></div></a><div class="tm-company-snippet__info"><a href="/ru/companies/spring_aio/profile/" class="tm-company-snippet__title" data-test-id="company-title"><span>Spring АйО</span></a><div class="tm-company-snippet__description">Компания</div></div></div><div class="tm-article-author__buttons"><!----><!----></div></div><div class="tm-article-author__company-contacts"><!--[--><a class="tm-article-author__contact" href="https://telegram.me/spring_aio" rel="noopener" target="_blank">Telegram</a><a class="tm-article-author__contact" href="https://www.springnow.ru" rel="noopener" target="_blank">Сайт</a><!--]--></div><div class="tm-article-author__separator"></div></div><!--]--><!--]--><div class="tm-user-card tm-user-card tm-user-card_variant-article tm-article-author__user-card" data-async-called="true"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/spring_aio/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" src="//habrastorage.org/getpro/habr/avatars/8e0/5e8/a1c/8e05e8a1c5fd4560f661efb2cb00e77e.png"></div></a><div class="tm-user-card__meta"><div class="tm-counter-container tm-karma tm-karma" title=" 85 голосов "><div class="tm-counter-container__header"><!--[--><div class="karma-display positive" data-v-7635202e>45</div><!----><!--]--></div><div class="tm-counter-container__footer"><!--[--><div class="tm-karma__text">Карма</div><!--teleport start--><!--teleport end--><!--]--></div></div><div class="tm-counter-container" title="Рейтинг пользователя"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score_no-margin tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">110.2</span></span><!--]--></div><!----></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div></div></div></div><div class="tm-user-card__info tm-user-card__info_variant-article tm-user-card__info"><div class="tm-user-card__title tm-user-card__title_variant-article tm-user-card__title"><span class="tm-user-card__name tm-user-card__name_variant-article tm-user-card__name">Spring АйО</span><a href="/ru/users/spring_aio/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article"> @spring_aio</a><!----></div><p class="tm-user-card__short-info tm-user-card__short-info_variant-article tm-user-card__short-info" data-test-id="user-card-speciality">Главный по Spring</p></div></div><!----><div class="tm-user-card__buttons tm-user-card__buttons_variant-article tm-user-card__buttons"><!----><div class="tm-user-card__button"><div class="tm-button-follow tm-user-card__button-follow"><!----><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div></div><!----><div class="tm-user-card__button tm-user-card__button_write" data-test-id="user-card-conversations"><svg class="tm-svg-img tm-user-card__button-icon" height="16" width="16"><title>Отправить сообщение</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#mail"></use></svg></div><!----></div><!----></div><div class="tm-article-author__user-contacts" data-test-id="author-contacts"><!----><!----><!----></div></div><!--]--></div><!--]--><!----></section><!----><!--[--><!--]--><!--]--><div class="tm-article-blocks__comments"><div id="publication-comments" class="tm-article-page-comments"><div><!--[--><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/companies/spring_aio/articles/823164/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" data-test-id="counter-comments"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted"> Комментировать </span><!--]--></a><!----></div><!--]--></div></div></div><!--[--><!--[--><!--]--><section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2><!--[--><!--]--></div><!----></header><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><!--[--><!--[--><div class="tm-tabs tm-tabs"><div class=""><!--[--><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim tm-tabs__tab-link">Лучшие за сутки</button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link_slim tm-tabs__tab-link">Похожие</button></span><!--]--></div><!----></div><div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><div class="tm-placeholder-article-cards"><!--[--><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><!--]--></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><!----></div><!--]--><!--]--></div><!--]--><!----></section><!--[--><!--]--><!----><!--[--><!--]--><!--]--></div><!--]--><!--]--></div></div><!--]--><!--]--></div></div><div class="tm-page__sidebar"><!--[--><!----><!--]--></div></div><!----><!--]--></div></div></main><!----></div><!----><div class="tm-footer"><div class="tm-page-width"><!--[--><div class="tm-footer__container"><div class="tm-footer__title"><a class="tm-svg-icon__wrapper tm-footer__title-link" href="/ru/"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>Хабр</title><use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a></div><div class="tm-footer__social"><!--[--><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Facebook</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Twitter</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>VK</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Telegram</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Youtube</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Яндекс Дзен</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a><!--]--></div><!--teleport start--><!--teleport end--><button class="tm-footer__link"><svg class="tm-svg-img tm-footer__icon" height="16" width="16"><title>Язык</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#lang"></use></svg> Настройка языка</button><a href="/ru/feedback/" class="tm-footer__link">Техническая поддержка</a><div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2025, </span><span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span></div></div><!--]--></div></div><!----><!--]--></div><!----></div><script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"823164":{"id":"823164","timePublished":"2024-06-21T08:18:06+00:00","isCorporative":true,"lang":"ru","titleHtml":"Новый компилятор K2 в Kotlin. Часть 1","leadData":{"textHtml":"\u003Cp\u003EВ этой статье эксперт сообщества \u003Ca href=\"https:\u002F\u002Ft.me\u002F+QmrKn0wA8CdkNjAy\"\u003ESpring АйО\u003C\u002Fa\u003E – \u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fauthor\u002Fpolivakhamikhail\"\u003EМихаил Поливаха\u003C\u002Fa\u003E рассмотрит новый компилятор К2 для Kotlin. В первую очередь он расскажет про то, какие проблемы должен решить новый компилятор, а потом про его дополнительные улучшения, которые дает эта версия. Гайд по миграции на новую версию будет опубликован в следующей части этой статьи.\u003C\u002Fp\u003E\u003Cp\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F012\u002F2f3\u002F8de\u002F0122f38dec22f39b26c521df2e76228d.jpeg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F012\u002F2f3\u002F8de\u002F0122f38dec22f39b26c521df2e76228d.jpeg","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","typeOf":"system","title":"Перевод","data":{"originalAuthorName":"Mikhail Polivakha","originalUrl":"https:\u002F\u002Fwww.baeldung.com\u002Fkotlin\u002Fk2-compiler-guide"}}],"author":{"id":"4149694","alias":"spring_aio","fullname":"Spring АйО","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F8e0\u002F5e8\u002Fa1c\u002F8e05e8a1c5fd4560f661efb2cb00e77e.png","speciality":"Главный по Spring","scoreStats":{"score":45,"votesCount":85},"rating":110.2,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"donationsMethod":null,"isInBlacklist":null,"careerProfile":null},"statistics":{"commentsCount":0,"favoritesCount":29,"readingCount":6483,"score":20,"votesCount":17,"votesCountPlus":17,"votesCountMinus":0},"hubs":[{"id":"23393","alias":"spring_aio","type":"corporative","title":"Блог компании Spring АйО","titleHtml":"Блог компании Spring АйО","isProfiled":false,"relatedData":null},{"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true,"relatedData":null},{"id":"19441","alias":"kotlin","type":"collective","title":"Kotlin","titleHtml":"Kotlin","isProfiled":true,"relatedData":null}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":{"vote":null,"unreadCommentsCount":0,"bookmarked":false,"canComment":false,"canEdit":false,"canViewVotes":false,"votePlus":{"canVote":false,"isChargeEnough":false,"isKarmaEnough":false,"isVotingOver":true,"isPublicationLimitEnough":false},"voteMinus":{"canVote":false,"isChargeEnough":false,"isKarmaEnough":false,"isVotingOver":true,"isPublicationLimitEnough":false},"canModerateComments":false,"trackerSubscribed":false,"emailSubscribed":false},"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Ch2\u003E1. Введение\u003C\u002Fh2\u003E\u003Cp\u003EВ этой статье эксперт сообщества \u003Ca href=\"https:\u002F\u002Ft.me\u002F+QmrKn0wA8CdkNjAy\"\u003ESpring АйО\u003C\u002Fa\u003E –\u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fauthor\u002Fpolivakhamikhail\"\u003E \u003Cu\u003EМихаил Поливаха\u003C\u002Fu\u003E\u003C\u002Fa\u003E рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2 призван решить, а затем о других минорных улучшениях, которые были сделаны. Гайд по обновлению на новую версию будет опубликован в следующей части этой статьи.\u003C\u002Fp\u003E\u003Ch2\u003E2. Причины создания новой версии компилятора\u003C\u002Fh2\u003E\u003Cp\u003EДля понимания мотивации за новым K2 компилятором, необходимо начать с истории вопроса. А именно, важно понять, какую цель Kotlin преследовал изначально.\u003C\u002Fp\u003E\u003Ch3\u003E2.1 Создание Kotlin\u003C\u002Fh3\u003E\u003Cp\u003EKotlin существует уже достаточно продолжительное время. Разработка началась в 2010, так что мы можем с уверенностью сказать, что это было достаточно давно. Причина появления Kotlin заключается в том, что в те времена принято было считать, что Java развивается довольно медленно, стагнирует. Скорость разработки языка была довольно медленной, а новые фичи были редким явлением, в сравнении, к примеру с C#, в котором эволюция языка шла значительно быстрее.\u003C\u002Fp\u003E\u003Cp\u003EИ Kotlin создавался как язык, который, как предполагалось, заполнит этот пробел. Первоначально язык предлагался только как улучшенная версия Java, он не был предназначен для того, чтобы превзойти или каким-то образом заменить Java, так как Kotlin работает поверх JVM, он только предлагал дополнительные возможности языка. И этих возможностей было достаточно много, к примеру\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fkotlin\u002Fnull-safety\"\u003E\u003Cu\u003Enull handling\u003C\u002Fu\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fkotlin\u002Felvis-operator\"\u003E\u003Cu\u003EElvis operator\u003C\u002Fu\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fkotlin\u002Freified-functions\"\u003E\u003Cu\u003Egenerics refinement\u003C\u002Fu\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fkotlin\u002Fgenerics\"\u003E\u003Cu\u003Etype variance\u003C\u002Fu\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fkotlin\u002Fextension-methods\"\u003E\u003Cu\u003Eextension functions\u003C\u002Fu\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003Eи многие, многие другие. И все эти фичи невероятно востребованы у обычных разработчиков.\u003C\u002Fp\u003E\u003Ch3\u003E2.2 Проблемы Kotlin\u003C\u002Fh3\u003E\u003Cp\u003E\u003Cstrong\u003EОднако мы должны понимать, что чем больше фич есть в языке программирования, тем сложнее он будет, и, следовательно, компилятор должен будет совершить больше действий для компиляции проекта. \u003C\u002Fstrong\u003EНа данный момент в Kotlin насчитывается более 30 глобальных (жестких) ключевых слов и около 20 контекстных (мягких) ключевых слов, не считая десятка других модификаторов. К примеру, в языке Go всего 25 ключевых слов. Причина этого кроется в том, что Go был спроектирован таким образом, чтобы быть настолько простым, насколько это только возможно, именно с точки зрения функционала. Поэтому программы на Go компилируются невероятно быстро, в сравнении с программами на других языках программирования.\u003C\u002Fp\u003E\u003Cp\u003EНу а как обстоят дела с Kotlin? \u003Cstrong\u003EИз-за множества фич, которыми обладает Kotlin, а также из-за сложности системы типов Kotlin, время компиляции всегда было его слабым местом\u003C\u002Fstrong\u003E. Например, в общем случае \u003Ca href=\"https:\u002F\u002Fyoutrack.jetbrains.com\u002Fissue\u002FKTIJ-7707\u002FCompile-time-for-Kotlin-Projects-extremely-slow-on-OSX\"\u003E\u003Cu\u003EKotlin компилируется намного медленнее Java\u003C\u002Fu\u003E\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EЭти цифры, конечно, довольно спорные и сильно зависят от конфигурации процесса сборки, от сложности написанного нами кода и т.д\u003C\u002Fstrong\u003E. Разница в скорости компиляции была особенно заметна на более ранних версиях Kotlin. Опытные разработчики, вероятно, помнят, насколько медленным было автодополнение кода в свое время в IntelliJ IDEA. Конечно же со временем ситуация улучшилась, но проблема все еще существует.\u003C\u002Fp\u003E\u003Ch2\u003E3. Компилятор K2. Улучшения\u003C\u002Fh2\u003E\u003Cp\u003EНачиная с версии языка Kotlin 2.0.0 компилятор К2 используется по умолчанию. Это означает, что Maven и Gradle Kotlin плагины теперь будут компилировать код используя компилятор К2. Давайте более детально обсудим улучшения связанные с процессом компиляции. Начнем с главного - с улучшения производительности.\u003C\u002Fp\u003E\u003Ch3\u003E3.1. Скорость компиляции\u003C\u002Fh3\u003E\u003Cp\u003EРазработчики языка конечно же знали о проблеме со скоростью компиляции и в версии Kotlin 1.7.0 была выпущена альфа-версия компилятора К2. \u003Cstrong\u003EЕго основной целью было улучшение скорости компиляции программ и снижение сложности компилятора в целом\u003C\u002Fstrong\u003E.\u003Ca href=\"https:\u002F\u002Fkotlinlang.org\u002Fdocs\u002Fwhatsnew17.html#new-kotlin-k2-compiler-for-the-jvm-in-alpha\"\u003E \u003Cu\u003EПо наблюдениям JetBrains, улучшение скорости компиляции может достигать 200% и даже больше\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Важно понимать, что эти тесты относятся только к конкретным проектам JetBrains и могут отличаться от наших.\u003C\u002Fp\u003E\u003Ch3\u003E3.2. Smart Casts\u003C\u002Fh3\u003E\u003Cp\u003EПоскольку в K2 компиляторе была переписана Front-End часть, функциональность умного приведения типов улучшилась. Позже мы обсудим, что конкретно изменилось в компиляторе K2, а пока сосредоточимся на изменениях, заметных пользователю. Рассмотрим пример\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"kotlin\"\u003Efun translateExecution(exception: Throwable?) : Throwable? {\n    val isInvocationTargetException = exception is InvocationTargetException\n    if (isInvocationTargetException) {\n        return (exception as InvocationTargetException).targetException\n    }\n    return exception\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EЭто довольно простой код, не будем пояснять его детально. Он компилируется и новым и старым компилятором. \u003Cstrong\u003EПроблема заключается в том, что нам необходимо сделать явное приведение типов внутри выражения \u003Cem\u003Eif\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E. На самом деле, это избыточно, так как на этом этапе мы уже должны знать, что переменная \u003Cem\u003Eexception\u003C\u002Fem\u003E имеет тип \u003Cem\u003EInvocationTargetException\u003C\u002Fem\u003E. Однако Kotlin компилятор K1 (в данном конкретном случае), не сможет вывести тип локальной переменной exception. Связано это с тем, что K1 не может связать значение \u003Ccode\u003EisInvocationTargetException\u003C\u002Fcode\u003E и типа локальной переменной \u003Ccode\u003Eexception\u003C\u002Fcode\u003E. Иными словами, если \u003Ccode\u003EisInvocationTargetException == true\u003C\u002Fcode\u003E, то тип локальной переменной \u003Ccode\u003Eexception\u003C\u002Fcode\u003E точно \u003Ccode\u003EInvocationTargetException\u003C\u002Fcode\u003E, но К1 не может понять эту взаимосвязь. Но в случае компилятора К2 это явное приведение типов внутри выражения \u003Cem\u003Eif\u003C\u002Fem\u003E будет излишним и код будет выглядеть следующим образом:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"kotlin\"\u003Efun translateExecutionV2(exception: Throwable?) : Throwable? {\n    val isInvocationTargetException = exception is InvocationTargetException\n    if (isInvocationTargetException) {\n        return exception.targetException\n    }\n    return exception\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EЭтот код успешно скомпилируется компилятором К2. Но нужно заметить, что следующий код все равно не будет работать:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"kotlin\"\u003Efun translateExecutionV2(exception: Throwable?) : Throwable? {\n    if (isInvocationTargetException(exception)) {\n        return exception.targetException\n    }\n    return exception\n}\n\nprivate fun isInvocationTargetException(exception: Throwable?) = \n  exception is InvocationTargetException\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EКомпилятор K2 не отслеживает проверки внутри функций. Чтобы решить эту проблему, у нас есть \u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fkotlin\u002Fcontracts\"\u003E\u003Cu\u003EContracts API\u003C\u002Fu\u003E\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003EВ области умного приведения типов сделано много других улучшений, но все они сводятся к одной простой вещи: \u003Cstrong\u003Eтеперь компилятор K2 способен лучше выводить типы, а явные приведения типов стали встречаться реже\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\u003Ch2\u003E4. Компилятор К2. Основные изменения\u003C\u002Fh2\u003E\u003Cp\u003EДавайте теперь обсудим, какие изменения привели к заявленному росту производительности. Чтобы понять это, нужно сначала выяснить, какая именно часть компилятора была изменена - в основном это Front-End часть компилятора Kotlin.\u003C\u002Fp\u003E\u003Cp\u003EФронтенд компилятор отвечает за построение PSI (Program Structure Interface) - конкретного синтаксического дерева (Concrete Syntax Tree, CST) - начальную структуру данных, которую собирает Front-End компилятор Kotlin. Позже Front-End компилятор Kotlin строит семантическое дерево FIR (Front-End Intermediate Representation), которое является абстрактным синтаксическим деревом (Abstract Syntax Tree, AST).\u003C\u002Fp\u003E\u003Ch3\u003E4.1 PSI vs FIR\u003C\u002Fh3\u003E\u003Cp\u003EПервая проблема со старым компилятором заключалась в том, что он слишком полагался на структуру PSI, которая по своей конструкции намного больше и сложнее, чем структура данных FIR. Это связано с тем, что PSI содержит всю информацию, имеющуюся в исходном коде, в то время как FIR представляет собой более разреженную версию. Поэтому работа с FIR в целом быстрее.\u003C\u002Fp\u003E\u003Cp\u003EЕще одной проблемой старого компилятора был \u003Cem\u003EBindingContext\u003C\u002Fem\u003E. Это огромная коллекция хэш-таблиц, в которой хранится семантическая информация о программе. Так, к примеру, если мы хотим найти переменную, на которую ссылаются в\u003Ca href=\"https:\u002F\u002Fwww.baeldung.com\u002Fkotlin\u002Fstring-interpolation\"\u003E \u003Cu\u003Eинтерполяции строк\u003C\u002Fu\u003E\u003C\u002Fa\u003E, старому компилятору нужно выполнить 2 поиска в хеш таблицах внутри BindingContext. Новый компилятор K2 этого не делает, а вместо этого полагается на древовидную структуру данных в FIR. Доступ к значению узла дерева выполняется быстрее, чем 2 поиска внутри огромной хэш-таблицы.\u003C\u002Fp\u003E\u003Ch3\u003E4.2 Уменьшение количества jump между классами\u003C\u002Fh3\u003E\u003Cp\u003EИ наконец, компилятор К2 значительно сократил количество jump, необходимых для определения, например, возвращаемого значения функции. Чтобы понять, что означает \"jump\", давайте рассмотрим следующий пример:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"kotlin\"\u003E\u002F\u002F in ChildClass.kt\nclass ChildClass : ParentClass() {\n    fun greeting(s: String) = hello(s)\n}\n\n\u002F\u002F in ParentClass.kt\nopen class ParentClass {\n    internal fun hello(s: String) = println(\"Hello, $s!\")\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EИтак, здесь тип возвращаемого значения функции greeting() соответствует типу возвращаемого значения функции hello(). Поэтому нам нужно сначала определить тип возвращаемого значения функции hello() для того, чтобы определить тип возвращаемого значения функции greetings(). Однако на самом деле мы не знаем, какую функцию hello() имел в виду пользователь, поэтому нам нужно сначала ее найти. Это может быть локальная функция (в том же классе, например), это может быть функция родительского класса, который скорее всего находится в другом файле .kt, поэтому нам нужно выполнить jump в родительский файл .kt. Искомой функции может не оказаться в родительском файле. Кроме того, это может быть функция, включенная через импорт со звездочкой, поэтому нам нужно искать функцию верхнего уровня hello() в этих файлах и т.д. Все это и будет jump в другие исходные файлы.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EJump относительно дорогие в процессе разрешения ссылок\u003C\u002Fstrong\u003E. Старый компилятор Kotlin выполнял множество jump практически на каждом этапе процесса компиляции. В отличие от этого, новый компилятор Kotlin K2 имеет всего 2 этапа, на которых присутствуют jump - вывод родительских типов (как в приведенном выше примере) и неявные объявления типов.\u003C\u002Fp\u003E\u003Ch2\u003E5. Модуль Multiplatform\u003C\u002Fh2\u003E\u003Cp\u003EТакже были внесены два изменения в модуль Kotlin Multiplatform.\u003C\u002Fp\u003E\u003Ch3\u003E5.1 Разделение модулей\u003C\u002Fh3\u003E\u003Cp\u003EВ прошлом компилятор Kotlin требовал наличие как common, так и платформенного кода на этапе компиляции. В некоторых сценариях это могло привести к ситуациям, когда код на Kotlin common вызывал платформенный код. Теперь возможно компилировать платформенный код отдельно от common модуля. Такой подход менее подвержен ошибкам и предсказуем в поведении кода на различных платформах.\u003C\u002Fp\u003E\u003Ch3\u003E5.2 Расширение видимости\u003C\u002Fh3\u003E\u003Cp\u003EТеперь мы также можем изменить модификатор видимости для \u003Cem\u003Eэле\u003C\u002Fem\u003Eмента \u003Ccode\u003Eactual\u003C\u002Fcode\u003E так, чтобы он отличался от \u003Ccode\u003Eexpect\u003C\u002Fcode\u003E. \u003Cstrong\u003EВажно отметить, что мы можем либо расширить уровень видимости actual декларации, по сравнению с expected, либо оставить таким же, но не сузить.\u003C\u002Fstrong\u003E  Ранее компилятор требовал, чтобы модификатор видимости был одинаковым как для \u003Ccode\u003Eexpect\u003C\u002Fcode\u003E  элемента, так и для \u003Cem\u003E \u003C\u002Fem\u003E\u003Ccode\u003Eactual\u003C\u002Fcode\u003E. Рассмотрим пример:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"kotlin\"\u003E\u002F\u002F Common module\nexpect fun getPlatform(): Platform\n\n\u002F\u002F Android Platform\nactual fun getPlatform(): Platform = AndroidPlatform()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EВ приведенном выше примере обе функции неявно имеют модификатор \u003Cem\u003Epublic\u003C\u002Fem\u003E. Теперь можно сделать это:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"kotlin\"\u003E\u002F\u002F Common module\ninternal expect fun getPlatform(): Platform\n\n\u002F\u002F Android Platform\nactual fun getPlatform(): Platform = AndroidPlatform()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EЗдесь \u003Ccode\u003Eexpect\u003C\u002Fcode\u003E функция имеет модификатор видимости internal. В то же время \u003Ccode\u003Eactual\u003C\u002Fcode\u003E реализация для платформы Android, например, имеет неявный модификатор public.\u003C\u002Fp\u003E\u003Ch3\u003E6. Выводы\u003C\u002Fh3\u003E\u003Cp\u003EKotlin уже существует достаточно долгое время. За это время в нем накопилось множество возможностей. Поскольку Kotlin в итоге компилируется в байт-код Java (не учитывая KMM и Kotlin Native), все его возможности реализованы компилятором. По этой причине процесс компиляции был довольно сложным. Это привело к медленной компиляции проектов на Kotlin. Компилятор K2 решает именно эту проблему. Он стремится упростить процесс компиляции, сделав его значительно быстрее. В то же время он улучшает умное приведение типов и позволяет разделять общий и платформенный код в KMM.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1d\u002F756\u002F406\u002Fa1d7564060c22ca43c4572f8d920a9af.png\" width=\"1920\" height=\"412\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1d\u002F756\u002F406\u002Fa1d7564060c22ca43c4572f8d920a9af.png\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПрисоединяйтесь к русскоязычному сообществу разработчиков на Spring Boot в телеграм - \u003Ca href=\"https:\u002F\u002Ft.me\u002F+oBwACbkvJ19iODAy\"\u003E\u003Cu\u003ESpring АйО\u003C\u002Fu\u003E\u003C\u002Fa\u003E, чтобы быть в курсе последних новостей из мира разработки на Spring Boot и всего, что с ним связано.\u003C\u002Fp\u003E\u003Cp\u003EЖдем всех, \u003Ca href=\"https:\u002F\u002Ft.me\u002F+oBwACbkvJ19iODAy\"\u003E\u003Cu\u003Eприсоединяйтесь\u003C\u002Fu\u003E\u003C\u002Fa\u003E!\u003C\u002Fp\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"kotlin"},{"titleHtml":"k2"},{"titleHtml":"compiler"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F012\u002F2f3\u002F8de\u002F0122f38dec22f39b26c521df2e76228d.jpeg","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F012\u002F2f3\u002F8de\u002F0122f38dec22f39b26c521df2e76228d.jpeg","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fspring_aio\\\u002Farticles\\\u002F823164\\\u002F\"},\"headline\":\"Новый компилятор K2 в Kotlin. Часть 1\",\"datePublished\":\"2024-06-21T11:18:06+03:00\",\"dateModified\":\"2024-08-30T09:38:58+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Spring АйО\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"1. ВведениеВ этой статье эксперт сообщества Spring АйО &ndash; Михаил Поливаха рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fspring_aio\\\u002Farticles\\\u002F823164\\\u002F#post-content-body\",\"about\":[\"c_spring_aio\",\"h_programming\",\"h_kotlin\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F823164\\\u002F8a835d1d3df5d614366431ef1d424518\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fa1d\\\u002F756\\\u002F406\\\u002Fa1d7564060c22ca43c4572f8d920a9af.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F012\\\u002F2f3\\\u002F8de\\\u002F0122f38dec22f39b26c521df2e76228d.jpeg\"]}","metaDescription":"1. Введение В этой статье эксперт сообщества Spring АйО – Михаил Поливаха рассмотрит новый компилятор К2 для Kotlin. Сначала он расскажет о том, какие проблемы K2 призван решить, а затем о других...","mainImageUrl":null,"amp":true,"customTrackerLinks":[]},"polls":[],"commentsEnabled":{"status":true,"reason":null},"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":"review","banner":null,"multiwidget":null,"multiwidgetUuid":null,"readingTime":7,"complexity":"medium","isEditorial":false,"allowedFeatures":{"isTestTargetAllow":false}}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"postReasonsList":null,"view":"list","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"viewedPosts":[],"myFeedFilter":{"complexity":"all","score":"all","types":["articles","posts","news"]},"myFeedIsApplyFilters":false,"myFeedIsForce":false,"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":"","idempotenceKey":""}},"companies":{"companyRefs":{"spring_aio":{"alias":"spring_aio","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F8f1\u002F91a\u002F458\u002F8f191a4584b8fab12d15af23e447a1d5.png","titleHtml":"Spring АйО","descriptionHtml":null,"relatedData":null,"statistics":{"subscribersCount":407,"rating":78.11,"invest":null,"postsCount":98,"threadsCount":0,"newsCount":14,"vacanciesCount":0,"employeesCount":1,"careerRating":null},"foundationDate":null,"location":null,"siteUrl":"https:\u002F\u002Ft.me\u002Fspring_aio","staffNumber":"11–30 человек","registrationDate":"2024-05-27T07:08:22+00:00","representativeUser":null,"contacts":[{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fspring_aio","siteTitle":"Telegram: Contact @spring_aio","favicon":"https:\u002F\u002Ftelegram.org\u002Fimg\u002Fwebsite_icon.svg?4"},{"title":"Сайт","url":"https:\u002F\u002Fwww.springnow.ru","siteTitle":"Spring Now 2025","favicon":"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3136-3238-4361-b134-396534663161\u002FLogo.png"}],"settings":{"analyticsSettings":[{"type":"ym","trackingId":"97480399"}],"branding":null,"status":"active","isStartup":false,"hasActivePolls":false,"shouldShowHabrAds":false},"metadata":{"titleHtml":"Spring АйО - ","title":"Spring АйО - ","keywords":["java","spring","kotlin","spring boot","spring framework","ide","spring ai","git","spring-boot","koltin","generative ai","llm","jit","bytecode","jit-компилятор","jit-компиляция","c2","ai"],"descriptionHtml":"98 статей от авторов компании Spring АйО","description":"98 статей от авторов компании Spring АйО"},"aDeskSettings":null,"careerAlias":null,"schoolAlias":null}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"multiwidgets":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"multiwidgetLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null,"availableInvitesCount":{}},"companyAdd":{"currentStep":"","stepsData":{},"uncompletedSteps":[],"isStepLoading":true,"isStepCommitting":false,"isInitialized":false,"agreementContent":""},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"pagesCount":0},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"fixedBanner":{"isArticleStickyPanelVisible":false,"isArticleStickyPanelAtTheBottom":false,"isFixedBannerVisible":false,"isStickyPanelIconsHidden":false},"flows":{"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка","route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование","route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"id":"2","alias":"design","title":"Дизайн","titleHtml":"Дизайн","route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"id":"3","alias":"management","title":"Менеджмент","titleHtml":"Менеджмент","route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"id":"4","alias":"marketing","title":"Маркетинг","titleHtml":"Маркетинг","route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"id":"7","alias":"popsci","title":"Научпоп","titleHtml":"Научпоп","route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}],"updates":{}},"global":{"isPwa":false,"device":"mobile","isHabrCom":true,"requestId":"3da8df1743e8a8fb0223c888c26a28b9"},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"welcomePage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"query":{},"pathname":"\u002Fru\u002Fcompanies\u002Fspring_aio\u002Farticles\u002F823164\u002F","path":"\u002Fru\u002Fcompanies\u002Fspring_aio\u002Farticles\u002F823164\u002F","href":"\u002Fru\u002Fcompanies\u002Fspring_aio\u002Farticles\u002F823164\u002F"}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null,"userUpdates":{"feeds":{"newPostsCount":null,"newThreadsCount":null,"newNewsCount":null,"newCount":null},"conversationUnreadCount":0}},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"onboarding":{"currentStep":null,"stepsData":{},"stepsErrors":{},"completedSteps":[],"isStepCommitting":false,"isCommitDisabled":true},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null,"sticker":null},"publicationStatistics":{"statsInfo":{},"statsFunnels":{},"statsGraph":{},"defaultSuggest":{},"suggest":{},"timeTracker":{},"isTrackingActivity":false,"isUserActive":true,"otherPublicationStats":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":true,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":[{"id":"story-998","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F91a\u002F166\u002F49f\u002F91a16649f9ef89302a5a56cfa22a451d.png","title":"Яндекс Практикум","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up"},"title":"Как расти на работе?","lang":"ru","startTime":"2025-03-18T18:45:00+03:00","finishTime":"2025-03-31T19:00:00+03:00","slides":[{"id":"story-998_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbf4\u002F911\u002F7e6\u002Fbf49117e637ff2099b3944f8803cd7a3.png","button":null},{"id":"story-998_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3e3\u002Fc84\u002Fe83\u002F3e3c84e8330ea1ddf72e9d310457ed2f.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}},{"id":"story-998_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F84b\u002F533\u002F3c3\u002F84b5333c3e77e8dac62a8b50d042acb9.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}},{"id":"story-998_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F257\u002Feb0\u002F2be\u002F257eb02bea1777e13f3e647cae6e06cd.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}},{"id":"story-998_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F858\u002F086\u002F0ed\u002F8580860ed3497c043c04f9a42054d74f.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}},{"id":"story-998_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcdf\u002F32f\u002F387\u002Fcdf32f38777f046c063b5182f4125e14.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}},{"id":"story-998_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd48\u002Ff2d\u002F0e2\u002Fd48f2d0e2ecd7d746d738191bb913d8f.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}},{"id":"story-998_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb38\u002Ffd7\u002Fee0\u002Fb38fd7ee04848bf3b058be7403438bd1.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}},{"id":"story-998_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F79e\u002Feaa\u002F9d8\u002F79eeaa9d8af5a288ad42bd9d63b5793a.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}},{"id":"story-998_10","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcdc\u002F17e\u002F385\u002Fcdc17e38582dc67838b9abfb200d982e.png","button":{"title":"Расти в карьере","link":"https:\u002F\u002Fu.habr.com\u002Fstories_up","colorType":"light"}}]},{"id":"story-996","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe63\u002F36d\u002Fa24\u002Fe6336da24460ab6b9fbc347d03eb263a.png","title":"Хабр","link":null},"title":"Здоровье айтишника","lang":"ru","startTime":"2025-03-17T10:22:00+03:00","finishTime":"2025-04-13T10:22:00+03:00","slides":[{"id":"story-996_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb7c\u002F6de\u002F8ea\u002Fb7c6de8ea6789dbc30f071716172b6dd.jpg","button":null},{"id":"story-996_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2e7\u002F88a\u002F0fe\u002F2e788a0fe61729ca8b23eb59069c844f.jpg","button":{"title":"Личный опыт","link":"https:\u002F\u002Fu.habr.com\u002Fzd-1","colorType":"light"}},{"id":"story-996_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb93\u002F6f4\u002F256\u002Fb936f425653b84fa60ab00d09f78c543.jpg","button":{"title":"Как это было","link":"https:\u002F\u002Fu.habr.com\u002Fzd-2","colorType":"light"}},{"id":"story-996_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc10\u002Fd14\u002Ff5a\u002Fc10d14f5a4859fe10baecbcc2bcb8828.jpg","button":{"title":"Шея в фокусе","link":"https:\u002F\u002Fu.habr.com\u002Fzd-3","colorType":"dark"}},{"id":"story-996_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F535\u002Fe1b\u002F77a\u002F535e1b77a9eb896262ad73321f2ad99f.jpg","button":{"title":"Фотоинструкция","link":"https:\u002F\u002Fu.habr.com\u002Fzd-4","colorType":"light"}},{"id":"story-996_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F569\u002Fc39\u002F49f\u002F569c3949f5b330ea85d4a1864f481c3d.jpg","button":{"title":"Сидите (не)правильно","link":"https:\u002F\u002Fu.habr.com\u002Fzd-5","colorType":"dark"}},{"id":"story-996_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1f2\u002F1de\u002Fdbf\u002F1f21dedbf2902bc4061a75b839b63595.jpg","button":{"title":"Журнал изменений","link":"https:\u002F\u002Fu.habr.com\u002Fzd-6","colorType":"dark"}},{"id":"story-996_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F95a\u002F164\u002F21b\u002F95a16421badc3a9f1135309ab0c42c41.jpg","button":{"title":"Альтернатива","link":"https:\u002F\u002Fu.habr.com\u002Fzd-7","colorType":"light"}},{"id":"story-996_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F624\u002F027\u002F54d\u002F62402754d311798af44bcfe7f9abfedc.jpg","button":{"title":"Хроника поисков","link":"https:\u002F\u002Fu.habr.com\u002Fzd-8","colorType":"dark"}}]},{"id":"story-992","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3fe\u002F2fc\u002Fb05\u002F3fe2fcb05df852d7e1e00d44e54e39ae.png","title":"Сезоны Хабра","link":"https:\u002F\u002Fu.habr.com\u002Ffnstories"},"title":"Угадайте будущее в новом сезоне","lang":"ru","startTime":"2025-03-12T19:15:00+03:00","finishTime":"2025-03-31T23:56:00+03:00","slides":[{"id":"story-992_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc56\u002Faf5\u002Fc43\u002Fc56af5c4377f7f7b94f7b6ad20fc92c3.png","button":{"title":"А что за сезон?","link":"https:\u002F\u002Fu.habr.com\u002Ffnstories","colorType":"light"}},{"id":"story-992_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8fa\u002Fde7\u002F65d\u002F8fade765d99207f31c597283ae6ce912.png","button":{"title":"Какие темы нужны","link":"https:\u002F\u002Fu.habr.com\u002Ffnstories","colorType":"dark"}},{"id":"story-992_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F23e\u002F7b9\u002Fb24\u002F23e7b9b24cb056d1a42e8d31ccea16ce.png","button":{"title":"Сезон будущего ИИ","link":"https:\u002F\u002Fu.habr.com\u002Ffnstories","colorType":"dark"}},{"id":"story-992_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F27b\u002Fbfc\u002Fa18\u002F27bbfca18e656ee0122b5cb8eb2cb502.png","button":{"title":"Все правила сезона","link":"https:\u002F\u002Fu.habr.com\u002Ffnstories","colorType":"dark"}},{"id":"story-992_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1e0\u002F6c6\u002Ff33\u002F1e06c6f33e703bbd2b2ae3baee3376fd.png","button":{"title":"Как участвовать","link":"https:\u002F\u002Fu.habr.com\u002Ffnstories","colorType":"dark"}}]},{"id":"story-990","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F282\u002Fe80\u002Fbf1\u002F282e80bf1b73484126ed53c6f3e42692.png","title":"Aeza","link":"https:\u002F\u002Fu.habr.com\u002FI72qi"},"title":"С праздником весны!","lang":"ru","startTime":"2025-03-09T10:15:00+03:00","finishTime":"2025-03-30T23:59:00+03:00","slides":[{"id":"story-990_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F064\u002F9dd\u002Ff59\u002F0649ddf5949cae6c9342fb62034a36ac.png","button":null},{"id":"story-990_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F05f\u002F96b\u002F25e\u002F05f96b25e910c32256ee0b1916f21380.png","button":{"title":"Семейная история","link":"https:\u002F\u002Fu.habr.com\u002Fey2bY","colorType":"light"}},{"id":"story-990_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcd1\u002Ff5d\u002F921\u002Fcd1f5d921bb9489ac11727272660bdb6.png","button":{"title":"Движущиеся картинки","link":"https:\u002F\u002Fu.habr.com\u002FWLKXU","colorType":"light"}},{"id":"story-990_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb55\u002Fd45\u002Fec5\u002Fb55d45ec50e53275c60d16ea886a0672.png","button":{"title":"Личный опыт","link":"https:\u002F\u002Fu.habr.com\u002FSxrki","colorType":"light"}},{"id":"story-990_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ffa7\u002F1ce\u002Ffca\u002Ffa71cefca5ed0a3fe8b50bd703b3605f.png","button":{"title":"Алгоритм","link":"https:\u002F\u002Fu.habr.com\u002Ftbz2p","colorType":"light"}},{"id":"story-990_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F435\u002F89d\u002Ff90\u002F43589df9018846cc6a8eed986226b252.png","button":{"title":"Выбрать сценарий","link":"https:\u002F\u002Fu.habr.com\u002F0RCPk","colorType":"light"}},{"id":"story-990_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F514\u002F5f8\u002F619\u002F5145f86194ad48dad48a846b42af0f93.png","button":{"title":"Jiraзамещение","link":"https:\u002F\u002Fu.habr.com\u002FEwhYq","colorType":"light"}},{"id":"story-990_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F439\u002Fa83\u002Fae7\u002F439a83ae78f7ef711e3b9bbed1ec26c5.png","button":{"title":"8 вещей","link":"https:\u002F\u002Fu.habr.com\u002FVTv2r","colorType":"light"}},{"id":"story-990_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F02d\u002F783\u002F2f7\u002F02d7832f7b1c95d88bff9f34209e204a.png","button":{"title":"Интерфейсы","link":"https:\u002F\u002Fu.habr.com\u002FUFOMZ","colorType":"light"}},{"id":"story-990_10","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0cb\u002Ff7f\u002F0d9\u002F0cbf7f0d905d486ce4ff82bc939b21d5.png","button":{"title":"Стикеры ваши","link":"https:\u002F\u002Fu.habr.com\u002FoA1K7","colorType":"light"}}]},{"id":"story-984","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F648\u002F61b\u002F9ae\u002F64861b9aecb7c474cd94063f98045541.png","title":"Хабр","link":null},"title":"Всегда котов!","lang":"ru","startTime":"2025-03-01T00:01:09+03:00","finishTime":"2025-03-23T16:21:00+03:00","slides":[{"id":"story-984_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc06\u002Fc21\u002F93f\u002Fc06c2193ff34362ac2af782cf2571f55.png","button":null},{"id":"story-984_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb68\u002F15f\u002F763\u002Fb6815f7630b9c015b1e67efb5bdf12d4.jpg","button":{"title":"Сделать purrrr","link":"https:\u002F\u002Fu.habr.com\u002Fj4DN1","colorType":"light"}},{"id":"story-984_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F550\u002F76e\u002Fd7a\u002F55076ed7a0954e243f944fc2f330623a.png","button":{"title":"Тыгыдык","link":"https:\u002F\u002Fu.habr.com\u002Fya360_kotov","colorType":"dark"}},{"id":"story-984_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2fb\u002F23b\u002F06c\u002F2fb23b06cf294c2050104b2aef589788.jpg","button":{"title":"Исследование","link":"https:\u002F\u002Fu.habr.com\u002FbO3r0","colorType":"light"}},{"id":"story-984_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff50\u002F50f\u002F0ae\u002Ff5050f0aeea1335c4f0544c1863f8342.jpg","button":{"title":"Детали проекта","link":"https:\u002F\u002Fu.habr.com\u002FQJmhe","colorType":"light"}},{"id":"story-984_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F825\u002F3dd\u002F5f5\u002F8253dd5f5c19dd061578f1d09310a45f.jpg","button":{"title":"Эксперименты","link":"https:\u002F\u002Fu.habr.com\u002FVaOdo","colorType":"light"}},{"id":"story-984_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3fb\u002Fc92\u002F0f9\u002F3fbc920f9ea81eca2c1c027ff77fc659.jpg","button":{"title":"Это не мем","link":"https:\u002F\u002Fu.habr.com\u002F0Wb3p","colorType":"light"}},{"id":"story-984_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2b4\u002F794\u002Fc33\u002F2b4794c33844e60aad9468018fd132cd.jpg","button":{"title":"В засаде","link":"https:\u002F\u002Fu.habr.com\u002FnasCD","colorType":"dark"}}]}]},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{"spring_aio":{"alias":"spring_aio","badgets":[{"title":"Захабренный","description":"Пользователь с кармой \u003E0","url":null,"isRemovable":false},{"title":"Участник Технотекста 7","description":"Участник Технотекста 7","url":null,"isRemovable":false}],"aboutHtml":"","contacts":[],"invitedBy":null,"careerProfile":null,"companies":{"pagesCount":1,"companyIds":["spring_aio"],"companyRefs":{"spring_aio":{"id":"8553","alias":"spring_aio","titleHtml":"Spring АйО","descriptionHtml":null,"imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F8f1\u002F91a\u002F458\u002F8f191a4584b8fab12d15af23e447a1d5.png","relatedData":null,"statistics":{"subscribersCount":407,"rating":78.11,"invest":null},"commonHubs":[]}}}}},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"notificationsLoading":false,"notificationsList":[],"notificationsPageCount":0,"pendingMarkNotificationsRead":[],"publicationsLoading":true,"publicationsList":[],"publicationsPageCount":0,"pendingDeletePublications":false,"pendingMarkPublicationsRead":false},"events":{"eventRefs":{},"eventIds":[],"pagesCount":0,"categories":[],"cities":[],"actualEvents":null,"currentEvent":null,"eventsFilter":{"city":"all","timeStarted":null,"timeEnded":null}},"wysiwyg":{"WYSIWYGRulesRefs":null}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="https://assets.habr.com/habr-web/js/chunk-vendors.3b11d41f.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.7a97ea6d.js" defer></script></div>
    <div id="overlays"><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--></div>
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S28W1WC23F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

  </script>
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
    </body>

    </html>
